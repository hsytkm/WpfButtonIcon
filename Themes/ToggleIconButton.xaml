<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrls="clr-namespace:WpfButtonIcon.Controls"
    xmlns:options="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options">

    <Style TargetType="{x:Type ctrls:ToggleIconButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ctrls:ToggleIconButton}">
                    <ctrls:PackIcon x:Name="PART_Icon">
                        <ctrls:PackIcon.Foreground>
                            <SolidColorBrush x:Name="PART_IconForeground" Color="{Binding ActiveBrush.Color, RelativeSource={RelativeSource TemplatedParent}}" />
                        </ctrls:PackIcon.Foreground>

                        <ctrls:PackIcon.Triggers>
                            <EventTrigger RoutedEvent="ButtonBase.MouseEnter">
                                <BeginStoryboard>
                                    <Storyboard options:Freeze="True">
                                        <ColorAnimation
                                            options:Freeze="True"
                                            FillBehavior="HoldEnd"
                                            Storyboard.TargetName="PART_IconForeground"
                                            Storyboard.TargetProperty="Color"
                                            To="{Binding MouseOverColor, RelativeSource={RelativeSource TemplatedParent}}"
                                            Duration="0:0:0.1" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                            <EventTrigger RoutedEvent="ButtonBase.MouseLeave">
                                <BeginStoryboard>
                                    <Storyboard options:Freeze="True">
                                        <ColorAnimation
                                            options:Freeze="True"
                                            FillBehavior="HoldEnd"
                                            Storyboard.TargetName="PART_IconForeground"
                                            Storyboard.TargetProperty="Color"
                                            To="{Binding ActiveBrush.Color, RelativeSource={RelativeSource TemplatedParent}}"
                                            Duration="0:0:0.3" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </ctrls:PackIcon.Triggers>
                    </ctrls:PackIcon>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="PART_Icon" Property="Foreground" Value="{Binding ClickBrush, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="False">
                            <Setter TargetName="PART_Icon" Property="Kind" Value="{Binding OffKind, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>
                        <Trigger Property="ToggleButton.IsChecked" Value="True">
                            <Setter TargetName="PART_Icon" Property="Kind" Value="{Binding OnKind, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="PART_Icon" Property="Foreground" Value="{Binding InactiveBrush, RelativeSource={RelativeSource TemplatedParent}}" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>